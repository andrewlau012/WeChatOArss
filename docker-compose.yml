version: '3.8'

services:
  wechatoarss:
    image: alpine:3.19
    container_name: wechatoarss
    working_dir: /app
    command: >
      sh -c "apk add --no-cache ca-certificates tzdata wget &&
             mkdir -p /app/data /app/web/dist &&
             wget -O server https://github.com/andrewlau012/WeChatOArss/releases/latest/download/server &&
             chmod +x server &&
             ./server"
    ports:
      - "8080:8080"
    volumes:
      - ./data:/app/data
      - ./web/dist:/app/web/dist:ro
    environment:
      - RSS_HOST=192.168.1.100:8080
      - RSS_TOKEN=your_secure_token_here
      - SCHEDULER_TIMES=07:00,12:00,20:00
    restart: unless-stopped
